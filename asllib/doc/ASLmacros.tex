\usepackage{amsmath}  % Classic math package
\usepackage{amssymb}  % Classic math package
\usepackage{mathtools}  % Additional math package
\usepackage{graphicx}  % For figures
\usepackage{caption}  % For figure captions
\usepackage{subcaption}  % For subfigure captions
\usepackage{url}  % Automatically escapes urls
\usepackage{hyperref}  % Insert links inside pdfs
\usepackage[inline]{enumitem}  % For inline lists
\usepackage[export]{adjustbox}  % For centering too wide figures
\usepackage{mathpartir}  % For deduction rules and equations paragraphs
\usepackage{comment}
\usepackage{fancyvrb}
\usepackage[
  % Even pages have notes on the left, odd on the right
  twoside,
  % Notes on the right, should be less than outer
  marginparwidth=100pt,
  % margins
  top=4.5cm, bottom=4.5cm, inner=3.5cm, outer=4.5cm
  % To visualize:
  % showframe
]{geometry}
%\usepackage{stmaryrd} % for \llbracket and \rrbracket
\input{ifempty}
\input{ifformal}
\input{iftodo}
\input{control}

\newcommand\herd[0]{\texttt{herd7}}
\fvset{fontsize=\small}

\usepackage{enumitem}
\renewlist{itemize}{itemize}{20}
\setlist[itemize,1]{label=\textbullet}
\setlist[itemize,2]{label=\textasteriskcentered}
\setlist[itemize,3]{label=\textendash}
\setlist[itemize,4]{label=$\triangleright$}
\setlist[itemize,5]{label=+}
\setlist[itemize,6]{label=\textbullet}
\setlist[itemize,7]{label=\textasteriskcentered}
\setlist[itemize,8]{label=\textendash}
\setlist[itemize,9]{label=$\triangleright$}
\setlist[itemize,10]{label=+}
\setlist[itemize,11]{label=\textbullet}
\setlist[itemize,12]{label=\textasteriskcentered}
\setlist[itemize,13]{label=\textendash}
\setlist[itemize,14]{label=\textendash}
\setlist[itemize,15]{label=$\triangleright$}
\setlist[itemize,16]{label=+}
\setlist[itemize,17]{label=\textbullet}
\setlist[itemize,18]{label=\textasteriskcentered}
\setlist[itemize,19]{label=\textendash}
\setlist[itemize,20]{label=\textendash}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Abstract Syntax macros
% These are used by the AST reference, typing rerence, and semantics reference.

\newcommand\emptylist[0]{[\ ]}

\newcommand\BNOT[0]{\texttt{BNOT}} % Boolean inversion
\newcommand\NEG[0]{\texttt{NEG}} % Integer or real negation
\newcommand\NOT[0]{\texttt{NOT}} % Bitvector bitwise inversion

\newcommand\AND[0]{\texttt{AND}} % Bitvector bitwise and
\newcommand\BAND[0]{\texttt{BAND}} % Boolean and
\newcommand\BEQ[0]{\texttt{BEQ}} % Boolean equivalence
\newcommand\BOR[0]{\texttt{BOR}} % Boolean or
\newcommand\DIV[0]{\texttt{DIV}} % Integer division
\newcommand\DIVRM[0]{\texttt{DIVRM}} % Inexact integer division, with rounding towards negative infinity.
\newcommand\EOR[0]{\texttt{EOR}} % Bitvector bitwise exclusive or
\newcommand\EQOP[0]{\texttt{EQ\_OP}} % Equality on two base values of same type
\newcommand\GT[0]{\texttt{GT}} % Greater than for int or reals
\newcommand\GEQ[0]{\texttt{GEQ}} % Greater or equal for int or reals
\newcommand\IMPL[0]{\texttt{IMPL}} % Boolean implication
\newcommand\LT[0]{\texttt{LT}} % Less than for int or reals
\newcommand\LEQ[0]{\texttt{LEQ}} % Less or equal for int or reals
\newcommand\MOD[0]{\texttt{MOD}} % Remainder of integer division
\newcommand\MINUS[0]{\texttt{MINUS}} % Substraction for int or reals or bitvectors
\newcommand\MUL[0]{\texttt{MUL}} % Multiplication for int or reals or bitvectors
\newcommand\NEQ[0]{\texttt{NEQ}} % Non equality on two base values of same type
\newcommand\OR[0]{\texttt{OR}} % Bitvector bitwise or
\newcommand\PLUS[0]{\texttt{PLUS}} % Addition for int or reals or bitvectors
\newcommand\POW[0]{\texttt{POW}} % Exponentiation for ints
\newcommand\RDIV[0]{\texttt{RDIV}} % Division for reals
\newcommand\SHL[0]{\texttt{SHL}} % Shift left for ints
\newcommand\SHR[0]{\texttt{SHR}} % Shift right for ints

% Non-terminal names
\newcommand\unop[0]{\textsf{unop}}
\newcommand\binop[0]{\textsf{binop}}
\newcommand\literal[0]{\textsf{literal}}
\newcommand\expr[0]{\textsf{expr}}
\newcommand\lexpr[0]{\textsf{lexpr}}
\newcommand\slice[0]{\textsf{slice}}
\newcommand\leslice[0]{\texttt{LE\_Slice}}
\newcommand\slicesingle[0]{\texttt{Slice\_Single}}
\newcommand\slicelength[0]{\texttt{Slice\_Length}}
\newcommand\slicerange[0]{\texttt{Slice\_Range}}
\newcommand\slicestar[0]{\texttt{Slice\_Star}}

\newcommand\ty[0]{\textsf{ty}}
\newcommand\pattern[0]{\textsf{pattern}}
\newcommand\intconstraints[0]{\textsf{int\_constraints}}
\newcommand\intconstraint[0]{\textsf{int\_constraint}}
\newcommand\unconstrained[0]{\textsf{UnConstrained}}
\newcommand\wellconstrained[0]{\textsf{WellConstrained}}
\newcommand\constraintexact[0]{\textsf{Constraint\_Exact}}
\newcommand\constraintrange[0]{\textsf{Constraint\_Range}}
\newcommand\bitsconstraint[0]{\textsf{bits\_constraint}}
\newcommand\bitfield[0]{\textsf{bitfield}}
\newcommand\version[0]{\textsf{version}}
\newcommand\program[0]{\textsf{spec}} % Remove after fixing the syntax reference and typing reference.
\newcommand\spec[0]{\textsf{spec}}
\newcommand\typedidentifier[0]{\textsf{typed\_identifier}}
\newcommand\localdeclkeyword[0]{\textsf{local\_decl\_keyword}}
\newcommand\globaldeclkeyword[0]{\textsf{global\_decl\_keyword}}
\newcommand\localdeclitem[0]{\textsf{local\_decl\_item}}
\newcommand\globaldecl[0]{\textsf{global\_decl}}
\newcommand\fordirection[0]{\textsf{for\_direction}}
\newcommand\stmt[0]{\textsf{stmt}}
\newcommand\decl[0]{\textsf{decl}}
\newcommand\casealt[0]{\textsf{case\_alt}}
\newcommand\catcher[0]{\textsf{catcher}}
\newcommand\subprogramtype[0]{\textsf{sub\_program\_type}}
\newcommand\subprogrambody[0]{\textsf{sub\_program\_body}}
\newcommand\func[0]{\textsf{func}}
\newcommand\Field[0]{\textsf{field}}

% Expression labels
\newcommand\evar[0]{\textsf{E\_Var}}

% Literal labels
\newcommand\lint[0]{\textsf{L\_Int}}
\newcommand\lbool[0]{\textsf{L\_Bool}}
\newcommand\lreal[0]{\textsf{L\_Real}}
\newcommand\lbitvector[0]{\textsf{L\_Bitvector}}
\newcommand\lstring[0]{\textsf{L\_String}}

\newcommand\True[0]{\textsf{True}}
\newcommand\False[0]{\textsf{False}}

% Type labels
\newcommand\TInt[0]{\texttt{T\_Int}}
\newcommand\TReal[0]{\texttt{T\_Real}}
\newcommand\TString[0]{\texttt{T\_String}}
\newcommand\TBool[0]{\texttt{T\_Bool}}
\newcommand\TBits[0]{\texttt{T\_Bits}}
\newcommand\TEnum[0]{\texttt{T\_Enum}}
\newcommand\TTuple[0]{\texttt{T\_Tuple}}
\newcommand\TArray[0]{\texttt{T\_Array}}
\newcommand\TRecord[0]{\texttt{T\_Record}}
\newcommand\TException[0]{\texttt{T\_Exception}}
\newcommand\TNamed[0]{\texttt{T\_Named}}

\newcommand\identifier[0]{\textsf{identifier}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Typing macros
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand\tstruct[0]{\texttt{get\_structure}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand\emptyfunc[0]{{\emptyset}_\lambda}

\newcommand\id[0]{\texttt{id}}
\newcommand\op[0]{\texttt{op}}

\newcommand\Ignore[0]{\texttt{\_}}
\newcommand\None[0]{\texttt{None}}

\newcommand\envs[0]{\mathbb{E}}
\newcommand\staticenvs[0]{\mathbb{SE}}
\newcommand\dynamicenvs[0]{\mathbb{DE}}

\newcommand\ie{i.\,e.}
\newcommand\eg{e.\,g.}
\newcommand\error[0]{\textsf{error}}
\newcommand\synor{\ |\ }
\newcommand\syntt[1]{\mathtt{#1}}
\newcommand\ife[3]{\text{if}\ #1\ \text{then}\ #2\ \text{else}\ #3\ \text{end}}
\newcommand\inenv[2]{\left\langle #1, #2 \right\rangle}
\newcommand\reducesto{\ \to\ }
\newcommand\llbracket{[|}
\newcommand\rrbracket{|]}
\newcommand\interp[1]{\left\llbracket #1 \right\rrbracket}
\newcommand\st[0]{\ \middle|\ }
\newcommand\field[1]{.\text{#1}}
\newcommand\globals[0]{\field{globals}}
\newcommand\locals[0]{\field{locals}}
\newcommand\X[0]{\mathcal{X}}
\newcommand\N[0]{\mathbb{N}}
\newcommand\Q[0]{\mathbb{Q}}
\newcommand\Z[0]{\mathbb{Z}}
\newcommand\pow[1]{\mathcal{P}(#1)}
\newcommand\asldata[0]{\mathtt{asl\_data}}
\newcommand\aslctrl[0]{\mathtt{asl\_ctrl}}
\newcommand\aslpo[0]{\mathtt{asl\_po}}
\DeclareMathOperator{\dom}{dom}
\newcommand\partialto[0]{\rightharpoonup}
\newcommand\rightarrowfin[0]{\rightarrow_{\text{fin}}}
\newcommand\cupdot[0]{\cup}
\newcommand\seq[1]{\textsf{sequence}(#1)}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Ident info

\newcommand\ident[2]{\texttt{#1}\textsubscript{\texttt{\MakeUppercase{#2}}}}
\newcommand\identi[1]{\ident{I}{#1}}
\newcommand\identr[1]{\ident{R}{#1}}
\newcommand\identd[1]{\ident{D}{#1}}
\newcommand\identg[1]{\ident{G}{#1}}
